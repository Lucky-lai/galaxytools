<macros>

  <xml name="requirements">
    <requirements>
      <requirement type="package">gatk</requirement>
      <requirement type="set_environment">GATK_PATH</requirement>
      <requirement type="set_environment">GATK_SITE_OPTIONS</requirement>
      <yield />
    </requirements>
  </xml>
  <xml name="version_command">
    <version_command>@GATK_EXEC@ --help|grep '^The Genome'</version_command>
  </xml>
  <token name="@VERSION@">3.4-0</token>
  <token name="@OUTPUT_NAME_PREFIX@">${tool.name} - ${analysis_type.analysis_type_selector}</token>
  <token name="@GATK_EXEC@">
    java -jar "\$GATK_PATH/GenomeAnalysisTK.jar"
  </token>
  <token name="@THREADS@">
    --num_threads \${GALAXY_SLOTS:-4}
  </token>

  <xml name="macro_optional_parameters">
    <conditional name="optional_parameters">
      <param name="optional_parameters_enabled" type="boolean" label="Configure Optional Parameters" />
      <when value="true">
        <yield />
      </when>
      <when value="false" />
    </conditional>
  </xml>

  <xml name="macro_advanced_parameters">
    <conditional name="advanced_parameters">
      <param name="advanced_parameters_enabled" type="boolean" label="Configure Advanced Parameters" />
      <when value="true">
        <yield />
      </when>
      <when value="false" />
    </conditional>
  </xml>

</macros>
